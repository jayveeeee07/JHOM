<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rooms ‚Äî JHOM</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container">
    <!-- Header -->
    <header class="header">
      <a class="brand" href="index.html">
        <img src="logo.jpg" alt="logo">
        <div><h1>JAYVEE HALL OF MANSION</h1></div>
      </a>
      <div class="nav">
        <a href="home.html">HOME</a>
        <a href="room.html" class="active">ROOM</a>
        <a href="cart.html">CART</a>
        <a href="message.html">MESSAGE</a>
        <a href="notification.html">NOTIFICATION</a>
        <a href="adminpanel.html">ADMIN</a>
        <button class="icon-btn" id="menuBtn">‚ò∞</button>
      </div>
    </header>

    <!-- Page Title -->
    <section class="card">
      <h2>Available Rooms</h2>
      <p class="small-muted">Choose the perfect room for your stay at JAYVEE Hall of Mansion.</p>
    </section>

    <!-- Room List -->
    <section class="grid" id="roomList"></section>
  </main>

  <!-- Side Menu -->
  <aside class="side-menu" id="sideMenu">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <strong>Connect</strong>
      <button class="icon-btn" id="closeMenu">‚úï</button>
    </div>
    <div class="socials">
      <a href="https://www.facebook.com/JaysGumcar" target="_blank">üîµ Facebook</a>
      <a href="https://www.instagram.com/JaysGumcar" target="_blank">üì∏ Instagram</a>
      <a href="https://www.thread.com/JaysGumcar" target="_blank">üßµ Thread</a>
      <a href="mailto:jayveecaringal07@gmail.com" target="_blank">‚úâÔ∏è Email</a>
      <a href="https://www.telegram.com/JaysGumcar" target="_blank">üì® Telegram</a>
      <a href="About.html">‚ÑπÔ∏è About</a>
    </div>
  </aside>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="small-muted">¬© 2025 JHOM. All rights reserved.</div>
      <div class="kv">Built for mobile and desktop</div>
    </div>
  </footer>

  <script>
    document.getElementById('menuBtn').addEventListener('click', ()=> document.getElementById('sideMenu').classList.add('open'));
    document.getElementById('closeMenu').addEventListener('click', ()=> document.getElementById('sideMenu').classList.remove('open'));

    // Fetch rooms from backend
    fetch('server.php?action=getRooms')
      .then(res=>res.json())
      .then(data=> renderRooms(data))
      .catch(err=>{
        console.error(err);
        // Fallback sample rooms
        const sampleRooms = [
          {img:'image1.jpg', name:'Deluxe Room', price:'‚Ç± 5,000.00', number:'1210', desc:'A spacious deluxe room with modern amenities and a cozy atmosphere.'},
          {img:'image2.jpg', name:'Standard Room', price:'‚Ç± 3,000.00', number:'1211', desc:'A comfortable standard room perfect for budget-friendly stays.'},
          {img:'image3.jpg', name:'Gold Presidential Suite', price:'‚Ç± 999,639,976,967,123.00', number:'1218', desc:'Luxurious suite with premium features and panoramic views.'}
        ];
        renderRooms(sampleRooms);
      });

    function renderRooms(rooms){
      const container = document.getElementById('roomList');
      container.innerHTML = rooms.map(room=>`
        <div class="card">
          <img src="${room.img}" alt="${room.name}" style="width:100%;height:180px;object-fit:cover;border-radius:8px">
          <h3>${room.name}</h3>
          <p class="small-muted">Room No: ${room.number}</p>
          <p>${room.desc}</p>
          <div class="kv"><strong>${room.price}</strong></div>
          <div style="display:flex;gap:0.5rem;margin-top:0.5rem">
            <button class="btn btn-outline" onclick="saveToCart('${room.number}')">Interested</button>
            <a href="booking.html?room=${room.number}" class="btn">Book Now</a>
          </div>
        </div>
      `).join('');
    }
    function saveToCart(roomNumber){
      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      if(!cart.includes(roomNumber)){
        cart.push(roomNumber);
        localStorage.setItem('cart', JSON.stringify(cart));
        alert('Room saved to cart!');
      } else {
        alert('This room is already in your cart.');
      }
      document.querySelectorAll('.bookNowBtn').forEach(button => {
  button.addEventListener('click', () => {
    const roomCard = button.closest('.room-card');
    const selectedRoom = {
      roomNumber: roomCard.getAttribute('data-room-number'),
      price: roomCard.getAttribute('data-price'),
      image: roomCard.getAttribute('data-image'),
    };
    localStorage.setItem('selectedRoom', JSON.stringify(selectedRoom));
    // Redirect to booking page
    window.location.href = 'booking.html';
  });
});
    }
  </script>
</body>
</html>

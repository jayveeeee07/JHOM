<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JHOM — Login / Register</title>
  <link rel="stylesheet" href="index.css" />
  <style>
    * {
      box-sizing: border-box;
    }

    /* Container to center content and limit width */
    main.container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 16px;
      width: 100%;
    }

    /* Content sections: no border, background light, full width */
    section.content-section {
      width: 100%;
      margin: 20px 0;
      padding: 16px;
      border: none; /* NO border */
      border-radius: 8px;
      background: #f5f5f5;
      box-shadow: none; /* remove shadow if any */
    }

    /* Responsive images */
    .content-item img {
      max-width: 100%;
      height: auto;
      border-radius: 6px;
      flex-shrink: 0;
    }

    header.header,
    footer.footer {
      background: #007bff;
      color: white;
      padding: 1rem 1.5rem;
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.04em;
      user-select: none;
    }
    header.header {
      background: linear-gradient(90deg, #004080, #cc0000);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      flex-wrap: wrap;
      position: sticky;
      top: 0;
      z-index: 999;
    }
    header.header a.brand {
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;
    }
    header.header a.brand img {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      object-fit: contain;
    }
    header.header a.brand h1 {
      font-size: 1.4rem;
      margin: 0;
      white-space: nowrap;
    }
    .nav {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      align-items: center;
    }
    .nav a {
      color: white;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 6px;
      transition: background-color 0.3s ease;
    }
    .nav a:hover,
    .nav a.active {
      background: #cc0000;
    }

    h1.page-title {
      font-size: 1.5rem;
    }

    section {
      display: none;
      flex-direction: column;
    }
    section.active {
      display: flex;
    }

    h2 {
      margin-bottom: 1rem;
      color: #007bff;
      font-weight: 700;
      font-size: 1.3rem;
      border-bottom: 2px solid #007bff;
      padding-bottom: 0.3rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    label {
      font-weight: 600;
    }
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="file"] {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      outline-offset: 2px;
      outline-color: transparent;
      transition: outline-color 0.3s ease;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="password"]:focus,
    input[type="file"]:focus {
      outline-color: #007bff;
      border-color: #007bff;
    }

    button {
      cursor: pointer;
      padding: 0.6rem 1rem;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }
    button:hover:not(:disabled) {
      background: #0056b3;
    }
    button:disabled {
      background: #aac4f7;
      cursor: default;
    }

    .form-link {
      margin-top: 0.2rem;
      background: none;
      border: none;
      color: #007bff;
      font-weight: 600;
      text-align: left;
      padding: 0;
    }
    .form-link:hover {
      text-decoration: underline;
      cursor: pointer;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .error-message {
      color: #b00020;
      font-size: 0.85rem;
      font-style: italic;
      min-height: 1.1em;
    }

    #welcomeSection {
      text-align: center;
      gap: 1rem;
    }
    #welcomeSection img {
      max-width: 120px;
      border-radius: 8px;
      margin: 0 auto;
    }
    #welcomeSection p {
      font-size: 1rem;
      line-height: 1.4;
      max-height: 6rem;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 1rem;
      color: #444;
    }

    .recaptcha-placeholder {
      background: #e1e1e1;
      height: 50px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #555;
      font-size: 0.9rem;
      user-select: none;
      margin-bottom: 1rem;
    }

    a.brand-link {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: white;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.25rem;
    }
    a.brand-link img {
      height: 40px;
      border-radius: 6px;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <header class="header" role="banner" aria-label="Site header">
    <a href="#" class="brand-link" aria-label="JHOM Home">
      <img src="logo.jpg" alt="JHOM Logo" />
      JHOM — JAYVEE HALL OF MANSION
    </a>
  </header>

  <main class="container" role="main">
    <!-- Welcome Section -->
    <section id="welcomeSection" aria-label="Welcome message" class="active">
      <img src="logo.jpg" alt="JHOM Logo" />
      <h1 class="page-title">Welcome to JAYVEE HALL OF MANSION</h1>
      <p>
        Experience the finest blend of comfort and luxury at JHOM. Our dedicated team ensures
        every stay is memorable, offering exceptional service and facilities tailored to your needs.
        Discover elegance, convenience, and tranquility all in one place.
      </p>
      <div class="checkbox-group">
        <input type="checkbox" id="termsCheckbox" />
        <label for="termsCheckbox">I agree to the terms and conditions</label>
      </div>
      <button id="getStartedBtn" disabled>Get Started</button>
    </section>

    <!-- Login Section -->
    <section id="loginSection" aria-label="Login form" hidden>
      <h2>Login</h2>
      <form id="loginForm" novalidate>
        <label for="loginUsername">Username or Email:</label>
        <input type="text" id="loginUsername" name="loginUsername" required autocomplete="username" />
        
        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" name="loginPassword" required autocomplete="current-password" />
        
        <div class="error-message" id="loginError" role="alert" aria-live="assertive"></div>
        
        <button type="submit">Login</button>
      </form>
      <button class="form-link" id="forgotPasswordBtn">Forgot Password?</button>
      <button class="form-link" id="showRegisterBtn">Register</button>
    </section>

    <!-- Registration Section -->
    <section id="registerSection" aria-label="Registration form" hidden>
      <h2>Register</h2>
      <form id="registerForm" novalidate>
        <label for="registerPhoto">Upload Photo: <span aria-hidden="true" style="color:#b00020">*</span></label>
        <input type="file" id="registerPhoto" name="registerPhoto" accept="image/*" required />
        
        <label for="registerFullname">Fullname: <span aria-hidden="true" style="color:#b00020">*</span></label>
        <input type="text" id="registerFullname" name="registerFullname" required autocomplete="name" />
        
        <label for="registerEmail">Email: <span aria-hidden="true" style="color:#b00020">*</span></label>
        <input type="email" id="registerEmail" name="registerEmail" required autocomplete="email" />
        
        <label for="registerPassword">Password: <span aria-hidden="true" style="color:#b00020">*</span></label>
        <input type="password" id="registerPassword" name="registerPassword" required autocomplete="new-password" />
        
        <div class="recaptcha-placeholder" aria-label="ReCaptcha placeholder">
          [Recaptcha Placeholder]
        </div>

        <div class="error-message" id="registerError" role="alert" aria-live="assertive"></div>
        
        <button type="submit">Create Account</button>
      </form>
      <button class="form-link" id="backToLoginFromRegisterBtn">Back to Login</button>
    </section>
  </main>

  <script>
    // Elements
    const welcomeSection = document.getElementById('welcomeSection');
    const getStartedBtn = document.getElementById('getStartedBtn');
    const termsCheckbox = document.getElementById('termsCheckbox');

    const loginSection = document.getElementById('loginSection');
    const loginForm = document.getElementById('loginForm');
    const loginError = document.getElementById('loginError');
    const forgotPasswordBtn = document.getElementById('forgotPasswordBtn');
    const showRegisterBtn = document.getElementById('showRegisterBtn');

    const registerSection = document.getElementById('registerSection');
    const registerForm = document.getElementById('registerForm');
    const registerError = document.getElementById('registerError');
    const backToLoginFromRegisterBtn = document.getElementById('backToLoginFromRegisterBtn');

    // Utility functions for showing/hiding sections
    function showSection(section) {
      [welcomeSection, loginSection, registerSection].forEach(sec => {
        if (sec === section) {
          sec.removeAttribute('hidden');
          sec.classList.add('active');
        } else {
          sec.setAttribute('hidden', true);
          sec.classList.remove('active');
        }
      });
    }

    // Enable Get Started button only when terms checked
    termsCheckbox.addEventListener('change', () => {
      getStartedBtn.disabled = !termsCheckbox.checked;
    });

    // On clicking Get Started: go to login section
    getStartedBtn.addEventListener('click', () => {
      showSection(loginSection);
    });

    // Show Register form when clicked
    showRegisterBtn.addEventListener('click', () => {
      showSection(registerSection);
      registerForm.reset();
      registerError.textContent = '';
    });

    // Back to Login from Register form
    backToLoginFromRegisterBtn.addEventListener('click', () => {
      showSection(loginSection);
      loginError.textContent = '';
    });

    // LocalStorage user handling
    function getUsers() {
      return JSON.parse(localStorage.getItem('users') || '[]');
    }
    function saveUsers(users) {
      localStorage.setItem('users', JSON.stringify(users));
    }
    function validateEmail(email) {
      return /\S+@\S+\.\S+/.test(email);
    }

    // Login form submit
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      loginError.textContent = '';

      const usernameInput = loginForm.loginUsername.value.trim().toLowerCase();
      const passwordInput = loginForm.loginPassword.value;

      if (!usernameInput || !passwordInput) {
        loginError.textContent = 'Please enter both username/email and password.';
        return;
      }

      const users = getUsers();
      // Check by fullname or email (case insensitive)
      const user = users.find(u =>
        u.fullname.toLowerCase() === usernameInput ||
        u.email.toLowerCase() === usernameInput
      );

      if (!user) {
        loginError.textContent = 'User not found. Please register first.';
        return;
      }

      if (user.password !== passwordInput) {
        loginError.textContent = 'Incorrect password.';
        return;
      }

      // Save logged in user to localStorage (optional)
      localStorage.setItem('loggedInUser', JSON.stringify(user));

      // Redirect to home.html
      window.location.href = 'home.html';
    });

    // Register form submit
    registerForm.addEventListener('submit', (e) => {
      e.preventDefault();
      registerError.textContent = '';

      // Photo file name (simplified, real app needs file upload handling)
      const photoInput = registerForm.registerPhoto.files[0];
      if (!photoInput) {
        registerError.textContent = 'Please upload a photo.';
        return;
      }
      const photoName = photoInput.name;

      const fullname = registerForm.registerFullname.value.trim();
      const email = registerForm.registerEmail.value.trim().toLowerCase();
      const password = registerForm.registerPassword.value;

      if (!fullname) {
        registerError.textContent = 'Please enter your fullname.';
        return;
      }

      if (!validateEmail(email)) {
        registerError.textContent = 'Please enter a valid email.';
        return;
      }

      if (password.length < 6) {
        registerError.textContent = 'Password must be at least 6 characters.';
        return;
      }

      const users = getUsers();

      if (users.some(u => u.email === email)) {
        registerError.textContent = 'Email is already registered.';
        return;
      }

      users.push({ fullname, email, password, photo: photoName });
      saveUsers(users);

      alert('Account created successfully! Please login.');

      registerForm.reset();

      showSection(loginSection);
      loginError.textContent = '';
    });
  </script>
</body>
</html>
